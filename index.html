<!DOCTYPE html>
<html>
<head>
    <title>Дзынь</title>

    <!-- Мета-теги для иконок и цветовой схемы -->
    <link rel="apple-touch-icon" sizes="192x192" href="dzin.png">
    
    <!-- Мета-теги для Windows и цветовой схемы -->
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <!-- Мета-теги для iOS PWA -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!-- Стиль для фонового изображения и полноэкранного режима -->
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        body {
            background-image: url('background.jpg');
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
        }
    </style>
</head>
<body>
    <script>
        // Диплинк
        var vkUrl = "vk://vk.com/write-218837624?mvk_entrypoint=community_page";
        var webUrl = "https://m.vk.com/write-218837624?mvk_entrypoint=community_page";

        // Функция для проверки, поддерживается ли URI-схема VK
        function checkVkSupport() {
  // Создайте временную ссылку с URL-схемой VK и попробуйте открыть ее
        var testLink = document.createElement("a");
        testLink.href = vkUrl;

        // Проверьте, доступна ли URL-схема VK
        testLink.addEventListener("error", function() {
            // URL-схема недоступна, перенаправьте пользователя на веб-версию
            window.location.href = webUrl;
        });

        // Добавьте временную ссылку в документ для проверки
        document.body.appendChild(testLink);

        // Добавьте обработчик события для успешной загрузки URL-схемы
        testLink.addEventListener("load", function() {
            // URL-схема доступна, перенаправьте пользователя на приложение VK
            window.location.href = vkUrl;
        });
        }

     if (window.navigator.standalone) {
        checkVkSupport();
    }

        // Обработчик события visibilitychange
        document.addEventListener('visibilitychange', function () {
            if (document.visibilityState === 'visible' && window.navigator.standalone) {
                // Вызываем функцию проверки поддержки URI-схемы VK при разворачивании
                checkVkSupport();
            }
        });
    </script>
</body>
</html>
